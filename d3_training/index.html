<!DOCTYPE html>
<html lang = "en">
   <head>
      <script src = "https://d3js.org/d3.v4.min.js"></script>
      <!-- <script src = "d3-transform.js"></script> -->
   </head>

   <body>
     <svg width = "200" height = "200">
        <!-- <rect x = "0" y = "0" width = "300" height = "200" fill = "yellow"></rect> -->
        <line x1 = "100" y1 = "100" x2 = "200" y2 = "200" style = "stroke:rgb(255,0,0);stroke-width:2"/>
        <!-- g is an svg group -->
        <g transform = "translate(60,60) rotate(30)">
         <rect x = "20"
            y = "20"
            width = "60"
            height = "30"
            fill = "green">
         </rect>
         <circle cx = "0"
            cy = "0"
            r = "30"
            fill = "red"/>
        </g>
      </svg>

      <div id="svgcontainer" width = "200" height = "200">
      </div>

      <div class = "myclass" id="divId">
         Hello World!
      </div>

      <p></p>

      <ul id = "list">
         <li><li>
         <li></li>
      </ul>

      <input type = "button" name = "remove" value = "Remove fourth value"
               onclick = "javascript:remove()" />

      <script>
        // SELECTION

        // alert(d3.select("div").text()); // select div text
        // alert(d3.select(".myclass").text()); // select myclass text
        // alert(d3.select("#divId").text()); // select divId text

        // d3.select("div.myclass").append("span").text("aaaaaaa")
        // oppure:
        // var father = d3.select("div.myclass");
        // var span = father.append("span");
        // span.text("aaaaaa");

        d3.select(".myclass").html("Hello World! <span>from D3.js</span>");
        // d3.select(".myclass").attr("style", "color: red");
        d3.select(".myclass").style("color", "red");

        d3.select(".myclass").classed("myanotherclass", true);  //add class
        d3.select(".myclass").classed("myanotherclass", false); // remove class
        d3.select(".myclass").classed("myanotherclass"); // query class: true if at least 1 element with this class

        // switch class
        // var element = d3.select(".myclass")
        // element.classed("myanotherclass", !oneBar.classed("myanotherclass"));

        // DATA JOIN

        d3.select("#list").selectAll("li")
            .data([10, 20, 30, 25, 15])
            .text(function(d)
               { return "This is pre-existing element and the value is " + d; })
            .enter()
            .append("li")
            .text(function(d)
               { return "This is dynamically created element and the value is " + d; });

         function remove() {
            d3.selectAll("li")
            .data([10, 20, 30, 15])
            .exit()
            .remove()
         }

         d3.select("p")
          .datum(50)
          .text(function(d) {
             return "Used existing paragraph element and the data " + d + " is assigned.";
          });

        d3.select("div")
          .datum(100)
          .append("p")
          .text(function(d) {
             return "Created new paragraph element and the data " + d + " is assigned.";
          });

          var data = [1, 2, 3];
          var paragraph = d3.select("body")
          .selectAll("p")
          .data(data)
          .text(function (d, i) {
             console.log("d: " + d);
             console.log("i: " + i);
             console.log("this: " + this);
             return "The index is " + i + " and the data is " + d;
          });

          var width = 300;
          var height = 300;
          var svg = d3.select("#svgcontainer")
             .append("svg")
             .attr("width", width)
             .attr("height", height);

          var group = svg.append("g")
             .attr("transform", "translate(60, 60) rotate(30)");

          var rect = group.append("rect")
             .attr("x", 20)
             .attr("y", 20)
             .attr("width", 60)
             .attr("height", 30)
             .attr("fill", "green")

          var circle = group
             .append("circle")
             .attr("cx", 0)
             .attr("cy", 0)
             .attr("r", 30)
             .attr("fill", "red")

          d3.select("body").transition().style("background-color", "lightblue").delay(1000).duration(2000)

      </script>
   </body>
</html>
